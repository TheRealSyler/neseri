.level
  .level-item-left
    %h1.title= t(:users_index)
    %h2.subtitle (#{User.count} #{User.model_name.human(count: 2)})
  .level-item-right
    = link_to t("devise.invitations.new.submit_button"), new_user_invitation_path, class: 'button is-dark'

- if @pagy.pages > 1
  != pagy_bulma_nav(@pagy)
%table.table.is-fullwidth
  %thead
    %tr
      %th= t("admin.users.name")
      %th= t("admin.users.email")
      %th= t("admin.users.seminars")
      %th= t("admin.users.state")
      %th= t("admin.users.actions")
  %tbody
    - @users.find_each do |user|
      %tr
        %td= link_to user_name(user), admin_user_path(user)
        %td= user.email
        %td
          - user.created_seminars.each do |seminar|
            = link_to seminar.title, seminar_path(seminar)

          - user.teaching_seminars.each do |seminar|
            = link_to seminar.title, seminar_path(seminar)
        %td
          .tags
            - if user.confirmation_token && !user.confirmed_at
              %span.tag.is-warning
                =t("admin.users.tags.unconfirmed")
            - if user.invitation_token
              %span.tag.is-info
                =t("admin.users.tags.invitation_pending")
            - if user.profile_missing?
              %span.tag
                =t("admin.users.tags.profile_missing")
        %td
          %a(href="mailto:#{user.email}")
            =t(:send_mail)
          - if user != current_user
            %br
            = link_to t(:impersonate), impersonate_admin_user_path(user), method: :post
- if @pagy.pages > 1
  != pagy_bulma_nav(@pagy)

